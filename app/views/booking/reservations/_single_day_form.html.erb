<!-- Give date to see available services -->
<div class="field" id="sel_date_field">
  <%= f.label :date %><br>
  <div class="field" id="datepicker">
  <%= f.text_field :date, :placeholder => Date.today.strftime('%m-%d-%Y'), :class => 'datepicker', :id =>"dt" %>
  </div>
</div>

<div class="field" id="sel-time-field">
  <%= f.label :time %><br>
  <%= f.time_select :time %><br>
</div>

<div class="field" id="service_sel_field">
  <%= f.label :services %><br>
  <%= f.collection_radio_buttons :service_type_id, @todays_avail_services, :id, :name, checked: params[:service_type_id] do |b| %>
    <div class="service-collection-radio-button" id="<%= Booking::ServiceType.find(b.value).id %>">
      <%= b.radio_button %>
      <%= b.label %>
    </div>
  <% end %>
</div>

<div class="field" id="occupancy_field">
  <!-- Show based on which service is clicked above -->
  <% if @selected_service %>
  <% if @selected_service.adult_child_field %>
    <%= f.label :adult %><br>
    <%= f.number_field :adult %><br>
    <%= f.label :child %><br>
    <%= f.number_field :child %>
  <% else %>
    <%= f.label :persons %><br>
    <%= f.number_field :occupancy %>
  <% end %>
  <% end %>
</div>


<% if f.object.persisted? %>
  <%= f.check_box :_destroy %>
  <%= f.label :_destroy, "Destroy" %>
<% end %>

<script type="text/javascript">
  $("#dt").datepicker({
          format: 'mm-dd-yyyy'
      })
  .on('changeDate', function(ev){
    $('#dt').datepicker('hide');
  });

  var serviceChoices = document.getElementById('service_sel_field');
  var date_field = document.getElementById('sel_date_field');
  var occupancy_field = document.getElementById('occupancy_field');
  date = new Date(date_field);
  console.log((date_field + '_' + "attribute" + '_3i').value);
  //if(date_field.value)

  //Use date to determine available services for the category given. Will have a default date for today if no date is chosen. 

  //Use service to determine wither it's person / adult & child


  (function(){
    date_field.addEventListener("change", onChange.bind(date_field));
  })();

  function onChange(date_field){
    if ((date_field.value == null) || (date_field.value == "")){
    serviceChoices.disabled = true;
    }else{
    serviceChoices.disabled = false;
    }
  };
</script>